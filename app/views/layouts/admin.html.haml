!!! 5
%html
  %head
    %meta{ :charset => "utf-8" }
    %meta{ :name => "viewport", :content => "width=device-width, initial-scale=1.0" }
    %title Gramgoods
    = stylesheet_link_tag 'application', :media => "all"
    = stylesheet_link_tag 'admin', :media => "all"
    = csrf_meta_tags
  %body.admin-layout{ :class => "#{params[:controller]}-#{params[:action]}" }
    .navbar
      .navbar-inner
        .container
          %a.brand{ :href => '/' } GramGoods
          .nav-collapse
            %ul.nav
              %li{ :class => params[:controller] == 'stores' && params[:action] == 'index' ? 'active' : nil }
                %a{ :href => '/stores' } Stores
              %li
                %a{ :href => '' } Products
            %ul.nav.pull-right
              - if user_signed_in?
                %li
                  %a{ :href => '' } Logged into GramGoods as #{current_user.email}
                %li.divider-vertical
                %li
                  = link_to "Sign out of GramGoods", destroy_user_session_path, :method => :delete
                - if current_user.authentication.nil?
                  %li.divider-vertical
                  %li
                    %a{ :href => "/auth/instagram" } Authenticate your account using Instagram.</a>
                    %iframe.hide{ :src => "https://instagram.com/accounts/logout/" }
                - else
                  %li.divider-vertical
                  %li
                    = link_to "Sign out of Instagram.", current_user.authentication, :method => :delete, :class => "remove"
                  %li
                    = image_tag(current_user.thumbnail, :class => 'user-thumbnail' )
              - else
                %li
                  = link_to "Sign In", new_user_session_path
                %li.divider-vertical
                %li
                  = link_to "Sign Up", new_user_registration_path

            %ul.nav.pull-right
              %li.dropdown

    .container
      .row
        .span12
          %p.rails-notice.alert.alert-success{ :class => (notice.nil? ? 'hide' : nil) }
            = notice
          %p.rails-alert.alert.alert-error{ :class => (alert.nil? ? 'hide' : nil) }
            = alert
          = yield
    = include_gon
    -# TODO
      -#= javascript_include_tag 'admin'
    = javascript_include_tag 'application'
