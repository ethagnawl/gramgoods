= form_for([@store, @order], :html => { :id => 'order_form', :class => 'order-form' }) do |form|
  - if @order.errors.any?
    .form-errors-wrapper
      = render 'shared/form_errors', :target => @order
  %div
    %legend Order Details
    = form.fields_for :line_item do |line_item|
      = line_item.hidden_field :price, :value => @price
      = line_item.hidden_field :total, :value => @total
      = line_item.hidden_field :quantity, :value => @quantity
      - unless @flatrate_shipping_cost.nil?
        = line_item.hidden_field :flatrate_shipping_cost, :value => @flatrate_shipping_cost
      - unless @size.nil?
        = line_item.hidden_field :size, :value => @size
      - unless @color.nil?
        = line_item.hidden_field :color, :value => @color

    %fieldset
      %p
        Quantity: #{@quantity}
        %a.edit-quantity{ :href => "/#{@store_slug}/#{@product_slug}#quantity" } edit

    - unless @size.nil?
      %fieldset
        %p
          Size: #{@size}
          %a.edit-quantity{ :href => "/#{@store_slug}/#{@product_slug}#size" } edit

    - unless @color.nil?
      %fieldset
        %p
          Color: #{@color}
          %a.edit-quantity{ :href => "/#{@store_slug}/#{@product_slug}#color" } edit

    - unless @flatrate_shipping_cost.nil?
      %fieldset
        %p Flat Rate Shipping Cost: #{number_to_currency(@flatrate_shipping_cost)}

      %fieldset
        %p Price: #{number_to_currency(@price)}

      %fieldset
        %p Total: #{number_to_currency(@total)}

  %div
    = form.fields_for :recipient do |recipient|
      %legend Shipping Information
      %fieldset
        = recipient.text_field :first_name, :placeholder => "First Name*"
      %fieldset
        = recipient.text_field :last_name, :placeholder => "Last Name*"
      %fieldset
        = recipient.email_field :email_address, :placeholder => "Email Address*"
      %fieldset
        = recipient.text_field :street_address_one, :placeholder => "Street Address One*"
      %fieldset
        = recipient.text_field :street_address_two, :placeholder => "Street Address Two"
      %fieldset
        = recipient.text_field :city, :placeholder => "City*"
      %fieldset
        = recipient.select :state, options_for_select(us_states)
      %fieldset
        = recipient.text_field :postal_code, :placeholder => "Postal Code*"

  %div
    %legend#billing_information_legend Billing Information
    %fieldset
      %input#credit_card_number{ :type => "tel", :placeholder => "Credit Card Number*" }
    %fieldset
      = select_tag("credit_card_expiration_month", options_for_select([['Expiration Month', nil],
      ["01 - January", "01"],
      ["02 - February", "02"],
      ["03 - March", "03"],
      ["04 - April", "04"],
      ["05 - May", "05"],
      ["06 - June", "06"],
      ["07 - July", "07"],
      ["08 - August", "08"],
      ["09 - September", "09"],
      ["10 - October", "10"],
      ["11 - November", "11"],
      ["12 - December", "12"]]))
    %fieldset
      = select_tag("credit_card_expiration_year", options_for_select([['Expiration Year', nil],
        [2012, 2012],
        [2013, 2013],
        [2014, 2014],
        [2015, 2015],
        [2016, 2016],
        [2017, 2017],
        [2018, 2018],
        [2019, 2019],
        [2020, 2020]]))
    %fieldset
      = form.submit
